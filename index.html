<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>cookie Test</title>
        <script src="js/cookies.js"></script>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
        crossorigin="anonymous"></script>

        <link rel="stylesheet" href="css/app.css">
    </head>
    <!--___________________________________Begin APP-->
    <body>
        <div id="resultDiv"></div>

        <script>
            $(document).ready(function() {
                var $resultDiv = $("#resultDiv");
                var newUser = true;
                var daysSinceLastVisit;
                
                if(docCookies.hasItem("lastVisit")) {
                    newUser = false;
                    var lastVisit = docCookies.getItem("lastVisit");
                    var now = new Date();
                    var lastVisitDate = new Date(lastVisit);
                    var timeDiff = Math.abs(now.getTime() - lastVisitDate.getTime());
                    daysSinceLastVisit = Math.ceil(timeDiff / (1000 * 3600 * 24));
                    
                }
                
                
                docCookies.setItem("lastVisit", new Date(), Infinity);

                if(newUser) {
                    $resultDiv.text("Welcome to the Site!");
                }
                else if(daysSinceLastVisit > 20) {
                    $resultDiv.text("Welcome back to the Site!");
                }
                else {
                    $resultDiv.text("Welcome good user!");
                }
                if (sessionStorage && sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
                    console.log("creando nueva clave");
                        sessionStorage.setItem("clave2", true);
                        localStorage.setItem("clave3", false);
                        localStorage.clave4 = "esto es como objeto";
                        let names = ["Carlos", "Rolando", "Mama"];
                        localStorage.setItem("names", JSON.stringify(names));
                        //localStorage.names = "nada";
                }

                
            });
        </script>

    </body>
    <!--_____________________________________End App-->
</html>